{% load static %}
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Turing Code - GATE 2024 Rank Predictor</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="{% static 'assets/css/rank-style.css'%}">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <link rel="icon" type="image/png" href="{% static 'assets/img/icon.png' %}">
        <script>
            document.addEventListener('keydown', function (e) {
              if (e.code === 'KeyU' && (e.ctrlKey || e.metaKey)) {
                e.preventDefault();
                //alert('View source is disabled.');
              }
            });
        
            document.addEventListener('contextmenu', function (e) {
              e.preventDefault();
              //alert('Right-click is disabled.');
            });
          </script>
    </head>
    <body>
       
        <div class="content">
            <div class="logo">
                <img src="{% static "assets/img/logo.png" %}">
            </div>

            <div class="exam-name-heading">
                <h3> Predict Your GATE 2024 Rank  </h3>
            </div>

            <div class="exam-name-heading">
                <h4> Decoding Success: Your Rank, Our Precision. </h4>
            </div>

                <div class="textbox">
                    <form id="myForm" method="post" onsubmit="return validateForm()">
                        {% csrf_token %}
                        <!--<div class="textbox-1">
                            <input type="email" id="email" value="" placeholder="Enter Your Email ID" name="email" required>
                            <input type="text" id="mobile" value="" placeholder="Mobile Number" name="mobile" required>
                        </div>
                        <div class="textbox-1">
                            <select id="category" name="category" required>
                                <option value="Select Category"> Select Category </option>
                                <option value="UNRESERVED"> UNRESERVED </option>
                                <option value="EWS"> EWS </option>
                                <option value="OBC(NCL)"> OBC(NCL) </option>
                                <option value="SC"> SC </option>
                                <option value="ST"> ST </option>
                                <option value="PWD"> PWD </option>
                            </select>
                            
                        </div>
                        -->
                        <div class="textbox-1">
                            <input type="text" id="url" value="" placeholder="Paste Your Response Sheet URL" name="url" required>
                        </div>
                        <div class="textbox-1">
                            <input type="submit" id="submit-button" value="Submit">
                        </div>
                    </form>
            </div>
        </div>
            <div class="detail-video-faq">
                <div class="detail-video">
                    <h3> How to use GATE 2024 rank predictor. </h3>
                    <iframe id="video-iframe" src="https://www.youtube.com/embed/6A6jV8UEWas" frameborder="0" allowfullscreen></iframe>
                </div>

                <div class="detail-faq">
                    
                    <h2 id="faq-heading">GATE 2024 Rank Predictor FAQ</h2>

                    <div class="faq-container">

                        <div class="faq-question" onclick="toggleFAQ('answer1')">
                            <label>What information is required from the student to use the Turing Code GATE 2024 Rank Predictor?</label>
                            <div class="icon" id="icon1">+</div>
                        </div>
                        <div class="faq-answer" id="answer1">
                            <p>To use the Turing Code GATE 2024 Rank Predictor, you need to provide basic information
                                 such as your name and email. Additionally, you'll be asked to submit your response sheet for
                                  accurate calculations.</p>
                        </div>

                        <div class="faq-question" onclick="toggleFAQ('answer2')">
                            <label> How does the email verification process work in the Turing Code GATE 2024 Rank Predictor? </label>
                            <div class="icon" id="icon2">+</div>
                        </div>
                        <div class="faq-answer" id="answer2">
                            <p>After entering your email, the Turing Code GATE 2024 Rank Predictor ensures security through OTP verification.
                                 This step is crucial to validate your identity and provide personalized results.</p>
                        </div>

                        <div class="faq-question" onclick="toggleFAQ('answer2')">
                            <label> What information will I have access to after completing the verification process? </label>
                            <div class="icon" id="icon2">+</div>
                        </div>
                        <div class="faq-answer" id="answer2">
                            <p>Once your email is verified, you can view your total marks, All India Rank (AIR), accuracy, approximate GATE score, and detailed 
                                question-wise performance, including the number of attempted 1-mark and 2-mark questions.</p>
                        </div>

                        <div class="faq-question" onclick="toggleFAQ('answer2')">
                            <label> How does the Turing Code GATE 2024 Rank Predictor calculate the All India Rank (AIR)? </label>
                            <div class="icon" id="icon2">+</div>
                        </div>
                        <div class="faq-answer" id="answer2">
                            <p>The Turing Code GATE 2024 Rank Predictor estimates the All India Rank based on your response sheet and compares it with historical GATE data, ensuring a
                                 comprehensive and accurate prediction of your standing among all candidates.</p>
                        </div>

                        <div class="faq-question" onclick="toggleFAQ('answer2')">
                            <label> Can I see a breakdown of my performance, including the number of correct 1-mark and 2-mark questions attempted? </label>
                            <div class="icon" id="icon2">+</div>
                        </div>
                        <div class="faq-answer" id="answer2">
                            <p> Yes, the Turing Code GATE 2024 Rank Predictor provides detailed insights into your performance, including the number
                                 of correct 1-mark and 2-mark
                                 questions attempted. This breakdown helps you understand your strengths and areas for improvement.</p>
                        </div>

                        <div class="faq-question" onclick="toggleFAQ('answer2')">
                            <label>  How does the Turing Code GATE 2024 Rank Predictor calculate the approximate GATE Score? </label>
                            <div class="icon" id="icon2">+</div>
                        </div>
                        <div class="faq-answer" id="answer2">
                            <p> The approximate GATE Score is calculated by the Turing Code GATE 2024 Rank Predictor based on
                                 your responses and the official answer key. </p>
                        </div>

                        <div class="faq-question" onclick="toggleFAQ('answer2')">
                            <label>  Can I get information on the approximate qualifying marks category-wise? </label>
                            <div class="icon" id="icon2">+</div>
                        </div>
                        <div class="faq-answer" id="answer2">
                            <p>  Yes, the Turing Code GATE 2024 Rank Predictor provides an estimate of the qualifying marks category-wise.
                                 This information helps you
                                 gauge your performance in comparison to the qualifying thresholds set for different categories.</p>
                        </div>

                    </div>

                </div>
            </div>
        

<!-- Email Verification Modal -->
<!--<div id="emailVerifyModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal()">&times;</span>
        <h2>Email Verification</h2>
        <p>Enter the OTP sent to your email:</p>
        <input type="text" placeholder="OTP" id="otp" name="otp" required>
        <button id="otp-verify-button"  onclick="verifyEmailOTP()">Verify</button>
    </div>
</div>-->

<script>
    function validateForm() {
        var url = document.getElementById('url').value;
        /*var email = document.getElementById('email').value;
        var mobile = document.getElementById('mobile').value;
        var category = document.getElementById('category').value;
        
    
        // Email validation
        var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
            alert('Please enter a valid email address.');
            return false;
        }
    
        // Mobile validation
        var mobileRegex = /^[0-9]{10}$/;
        if (!mobileRegex.test(mobile)) {
            alert('Please enter a valid 10-digit mobile number.');
            return false;
        }
    
        // Category validation
        if (category === 'Select Category') {
            alert('Please select a category.');
            return false;
        }
    
        // URL validation
        var urlRegex = /^(ftp|http|https):\/\/[^ "]+$/;
        if (!urlRegex.test(url)) {
            alert('Please enter a valid URL.');
            return false;
        }*/
        var urlRegex = /^(ftp|http|https):\/\/[^ "]+$/;
        if (!urlRegex.test(url)) {
            alert('Please enter a valid URL.');
            return false;
        }
    
        SubmitForm();
        return false; // Prevent form submission
    }
    

    function closeModal() {
        document.getElementById('emailVerifyModal').style.display = 'none';
    }

    //save the form data in db
    function SubmitForm() {
        // Get the CSRF token from the cookie
        $.ajax({
            type: 'POST',
            url: '/rank/gate-new-student-save/',
            data: {
                //'email': $("input[name='email']").val(),
                //'mobile': $("input[name='mobile']").val(),
                //'category': $("select[name='category']").val(),
                'url': $("input[name='url']").val(),
                //'examname': 'UGC NET December 2023',
                //'subject': '87 Computer Science and Applications',
                //'shift': 'Morning',
                'csrfmiddlewaretoken': getCookie('csrftoken')
            },
            beforeSend: function(xhr, settings) {
                xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
            },
            success: function(data) {
                if(data.status === 'success'){
                    window.location.href = '{% url "gatenewresponse" %}';
                }
            },
            error: function() {
                alert('Something went wrong, please try again');
                
            }
        });
    }

    /*function verifyEmailOTP() {
        var otp = document.getElementById('otp').value;
        // Send the OTP to the server for verification
        $.ajax({
            type: 'POST',
            url: '/verify-email-otp/',
            data: {
                'otp': otp,
                'csrfmiddlewaretoken': getCookie('csrftoken')
            },
            beforeSend: function(xhr, settings) {
                xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
            },
            success: function(data) {
                if(data.error){
                    alert(data.error);
                }
                if(data.status === 'success'){
                    window.location.href = '{% url "ugcnet_response" %}';   
                }
            },
            error: function(data) {
                alert(data.error);
            }
        });
    }*/
    // Helper function to get the CSRF token from cookies
    function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            const cookies = document.cookie.split(';');
            for (let i = 0; i < cookies.length; i++) {
                const cookie = cookies[i].trim();
                // Check if the cookie name matches the CSRF cookie name
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }



    function toggleFAQ(answerId) {
        var selectedAnswer = document.getElementById(answerId);
        var selectedIcon = document.getElementById('icon' + answerId.charAt(answerId.length - 1));

        if (selectedAnswer.style.display === 'none' || selectedAnswer.style.display === '') {
            selectedAnswer.style.display = 'block';
            selectedIcon.textContent = '-';
        } else {
            selectedAnswer.style.display = 'none';
            selectedIcon.textContent = '+';
        }
    }
</script>

    </body>
</html>